<!-- BEGIN: contenido_principal -->
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta property="og:locale" content="en_GB" />
    <!-- BEGIN: metatags_open_graph -->

    <meta property="og:title" content="{OG_TITLE}"/>
    <meta property="og:type" content="{OG_TYPE}" />
    <meta property="og:description" content="{OG_DESCRIPTION}" />
    <meta property="og:url" content="{OG_URL}"/>
    <meta property="og:image" content="{OG_IMAGE}" />
    <meta property="og:image:type" content="{OG_IMAGE_TYPE}" />
    <meta property="og:image:alt" content="{OG_IMAGE_ALT}" />

    <!-- END: metatags_open_graph -->
  
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{TITULO_WEB}, MET</title>
    <base href="{CURRENT_DOMAIN}/">

    <!-- Google Analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-39344050-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->
    <!-- Dropbox app -->
  <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="j6rcmr41wuilngi"></script>
    <!-- END Dropbox app -->
    <link rel="icon" type="image/png" href="favicon.png">

    <!-- BEGIN: metatags_opcionales -->
    <!-- BEGIN: metatag_canonical -->
    <link rel="canonical" href="{METATAG_OPCIONAL_CANONICAL}">
    <!-- END: metatag_canonical -->
    <!-- END: metatags_opcionales -->

    <!-- BEGIN: metatag_concreto -->
    <meta name="{METATAG_TITULO}" content="{METATAG_DESCRIPCION}">
    <!-- END: metatag_concreto -->

    <!-- Bootstrap CSS framework -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!-- General website CSS -->
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen">

    <!-- Website section CSS -->
    <link rel="stylesheet" href="css/section/{SECTION_FILE_CSS}" type="text/css" media="screen">

    <!-- Jquery libraries -->
    <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
  
  	<!-- stuff for calendar -->
	<script src="https://www.metmeetings.org/scripts/js/jquery.simple-calendar.js"></script>
	<link rel="stylesheet" href="css/calendar/simple-calendar.css">
	<!-- <link rel="stylesheet" href="css/calendar/demo.css">  -->
  
    <!-- stuff for timeline -->
	<link rel="stylesheet" href="css/timeline/timeline.css">

    <!-- Popper libraries (for Bootstrap) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>

    <!-- JQuery BlockUI -->
    <script src="scripts/js/jquery.blockUI.js"></script>

    <!-- Bootstrap -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>

    <!-- BEGIN: css_form -->
    <link rel="stylesheet" href="css/section/form.css" type="text/css" media="screen">
    <!-- END: css_form -->

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- JQuery UI library -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- Script for tabbed content in Openbox -->
    <script>
        $(function () {
            $("#tabs").tabs();
        });
    </script>

    <!-- MailChimp stylesheet for embedded mailing list signup form -->
    <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">

    <!-- MET Javascript -->
    <script src="scripts/js/functions.js{HASH}"></script>

    <!-- BEGIN: script_nivoslider -->
    <!-- slider Javascript -->
    <link rel="stylesheet" href="css/slider/nivo-slider.css" type="text/css" media="screen"/>
    <script src="scripts/js/jquery.slider.min.js"></script>
    <!-- END: script_nivoslider -->

    <!-- BEGIN: script_colorbox -->
    <!-- modal box Javascript -->
    <link rel="stylesheet" href="/css/colorbox/colorbox.css" type="text/css">
    <script src="scripts/js/jquery.colorbox-min.js"></script>
    <!-- END: script_colorbox -->

    <!-- BEGIN: script_calendar -->
    <!-- datapicker Javascript -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="scripts/js/jquery-ui.js"></script>
    <!-- END: script_calendar -->

    <!-- BEGIN: script_datetimepicker -->
    <link rel="stylesheet" href="css/datetimepicker/jquery.datetimepicker.min.css">
    <script src="scripts/js/jquery.datetimepicker.full.min.js"></script>
    <!-- END: script_datetimepicker -->

    <!-- BEGIN: editor_script -->
    <script src="editor/ckeditor.js"></script>
    <!-- END: editor_script -->

    <!-- BEGIN: script_multiselect -->
    <link rel="stylesheet" href="css/chosen/chosen.min.css" type="text/css" media="screen">
    <script src="scripts/js/chosen.jquery.min.js" type="text/javascript"></script>
    <!-- END: script_multiselect -->

    <!-- BEGIN: placeholders_script -->
    <script src="scripts/js/placeholders.min.js"></script>
    <!-- END: placeholders_script -->

    <!-- BEGIN: bloque_ready -->
    <script>
        window.onload = function () {
            <!-- BEGIN: bloque_anclar_elemento -->
            anclarElemento("{ELEMENTO_ANCLAR}");
            <!-- END: bloque_anclar_elemento -->

            <!-- BEGIN: inicializar_ckeditor -->
            var editor = CKEDITOR.replace('{TEXTAREA_ID}', {toolbar: '{TEXTAREA_TOOLBAR}'});
            width = "100%";
            height = "150";
            <!-- BEGIN: config_params -->
            width = "{TEXTAREA_WIDTH}";
            height = "{TEXTAREA_HEIGHT}";
            <!-- END: config_params -->
            enterMode = CKEDITOR.ENTER_BR;
            <!-- END: inicializar_ckeditor -->

            <!-- BEGIN: javascript_nivoslider -->
            $('#slider').nivoSlider({
                effect: 'fade',
                pauseTime: 8000,
                directionNav: false,
                controlNav: false
            });
            <!-- END: javascript_nivoslider -->

            <!-- BEGIN: calendario -->
            $(".datepicker").datepicker({
                dateFormat: "dd-mm-yy",
                changeMonth: true,
                changeYear: true
            });
            <!-- END: calendario -->

            <!-- BEGIN: datetimepicker -->
            jQuery('.datetimepicker').datetimepicker({
                timepicker:false,
                format:'d-m-Y'
            });
            <!-- END: datetimepicker -->

            /* Tabbed content in Openbox */
            $('ul.tabs li').on('click', function () {
                let tab_id = $(this).attr('data-tab');

                $('ul.tabs li').removeClass('current');
                $('.tab-content').removeClass('current');

                $(this).addClass('current');
                $("#" + tab_id).addClass('current');
            });

            /* Mobile submenu toggle */
            if ($(document).width() <= 768) {
                $('a.nav-link.one').click(function (e) {
                    if ($(this).next('.levelTwoSubmenu').children().length > 0) {
                        e.preventDefault();
                        $(this).next('.levelTwoSubmenu').toggleClass('visible-submenu');
                    }
                });
            }
        };

    </script>
    <!-- END: bloque_ready -->

    <script>
        "use strict";
        <!-- BEGIN: validate_login -->
        document.addEventListener("DOMContentLoaded", function () {
            let loginForm = document.getElementById("frmLogin");
            let validation = loginForm.addEventListener("submit", function (event) {
                if (loginForm.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                } else {
                    document.frmLogin.submit();
                }
                loginForm.classList.add("was-validated");
            }, false);
        });
        <!-- END: validate_login -->

        <!-- BEGIN: validar_remember_password-->
        //Refresh captcha image when icon is clicked
        function refreshCaptchaRememberPassword() {
            $("#reloadCaptcha").on("click", function () {
                document.getElementById("imageCaptcha").src = "classes/securimage/securimage_show?sid=" + Math.random();
                document.getElementById("imageCaptcha").value = "";
            });
        }

        function refreshCaptcha() {
            document.getElementById("imageCaptcha").src = "classes/securimage/securimage_show?sid=" + Math.random();
            document.getElementById("imageCaptcha").value = "";
        }

        function validarEnvioClave() {
            let btnSubmit = document.frmRecordarClave.btnRememberPassword;
            let panelErrorLogin = document.getElementById("msgError");
            panelErrorLogin.className = "";
            let blError = false;
            let txtErrors = "";

            btnSubmit.disabled = true;
            mensajeCargando("{STATIC_GLOBAL_SENDING}...");


            if (!validarEmail(document.frmRecordarClave.txtEmail.value)) {
                txtErrors = "{STATIC_REMEMBER_PASSWORD_ERROR_EMAIL}";
                blError = true;
            }

            if (blError) {
                panelErrorLogin.innerHTML = txtErrors;
                panelErrorLogin.style.display = "block";
                btnSubmit.disabled = false;
                $.unblockUI();
            } else {
                panelErrorLogin.style.display = "none";
                let ajax = nuevoAjax();
                let respuesta;
                ajax.open("GET", "ajax/send_remember_password?mail=" + document.frmRecordarClave.txtEmail.value + "&captcha=" + document.frmRecordarClave.txtCaptcha.value);
                ajax.onreadystatechange = function () {
                    if (ajax.readyState === 4) {
                        respuesta = parseInt(ajax.responseText);
                        txtErrors = "<span>";
                        switch (respuesta) {
                            case 1:
                                panelErrorLogin.className = "msgOK";
                                txtErrors += "{STATIC_REMEMBER_PASSWORD_OK}";
                                refreshCaptcha();
                                break;
                            case 2:
                                txtErrors += "{STATIC_REMEMBER_PASSWORD_NO_SENDED}";
                                break;
                            case 3:
                                txtErrors += "{STATIC_REMEMBER_PASSWORD_MAIL_NO_EXISTS}";
                                break;
                            case 4:
                                txtErrors += "{STATIC_REMEMBER_PASSWORD_CAPTCHA_KO}";
                                break;
                        }
                        txtErrors += "</span>";
                        panelErrorLogin.innerHTML = txtErrors;
                        panelErrorLogin.style.display = "block";
                        btnSubmit.disabled = false;
                        $.unblockUI();
                    }
                };
                ajax.send(null);
                console.log(ajax.readystate);
            }
            console.log(ajax.readystate);
        }

        //ON PAGE LOAD, add event listeners
        $(document).ready(function () {
            refreshCaptchaRememberPassword();
        });

        <!-- END: validar_remember_password -->

        <!-- BEGIN: formulario_reiniciar_clave -->
        function validarResetClave() {
            let btnSubmit = document.frmResetClave.btnLogin;
            let panelErrorLogin = document.getElementById("msgError");
            let blError = false;
            let txtErrors = "<span>";

            btnSubmit.disabled = true;

            if (document.frmResetClave.txtPassword.value === "") {
                blError = true;
                txtErrors += "{STATIC_RESET_PASSWORD_ERROR_PASS_EMPTY}";
            } else if (document.frmResetClave.txtPassword.value !== document.frmResetClave.txtConfirmPassword.value) {
                blError = true;
                txtErrors += "{STATIC_RESET_PASSWORD_ERROR_PASS_EQUAL}";
            }

            if (blError) {
                txtErrors += "</span>";
                panelErrorLogin.innerHTML = txtErrors;
                panelErrorLogin.style.display = "block";
                btnSubmit.disabled = false;
            } else {
                document.frmResetClave.submit();
            }
        }

        <!-- END: formulario_reiniciar_clave -->

        <!-- BEGIN: validate_membership_form -->

        function removeUsernameAlert() {
            $("#txtEmailUser").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#emailUserMessage").html("");
                }
            });
        }

        function removePasswordAlert() {
            $("#txtPasswd").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#passwordMessage").html("");
                }
            });
        }

        function removeConfirmPasswordAlert() {
            $("#txtRePasswd").on("keyup", function () {
                if ($("#txtPasswd").val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#confirmPasswordMessage").html("");
                }
            });
        }

        function removeMatchPasswordsAlert() {
            $("#txtRePasswd").on("keyup", function () {
                let password = $("#txtPasswd");
                if ($(this).val() === password.val()) {
                    $(this).removeClass("errorBorderColor error");
                    password.removeClass("errorBorderColor error");
                    $("#passwordMatchMessage").html("");
                } else {
                    $(this).addClass("errorBorderColor error");
                    $("#passwordMatchMessage").html("Passwords must match");
                }
            });
        }

        function removeMatchPasswordsAlertReverse() {
            $("#txtPasswd").on("keyup", function () {
                let confirmPassword = $("#txtRePasswd");
                if ($(this).val() === confirmPassword.val()) {
                    $(this).removeClass("errorBorderColor error");
                    confirmPassword.removeClass("errorBorderColor error");
                    $("#passwordMatchMessage").html("");
                } else {
                    $(this).addClass("errorBorderColor error");
                    $("#passwordMatchMessage").html("Passwords must match");
                }
            });
        }

        function removeFirstNameAlert() {
            $("#txtNombre").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#firstNameMessage").html("");
                }
            });
        }

        function removeLastNameameAlert() {
            $("#txtApellidos").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#lastNameMessage").html("");
                }
            });
        }

        function removeCountryAlert() {
            $("#cmbPais").on("change", function () {
                if ($(this).val() > -1) {
                    $(this).removeClass("errorBorderColor error");
                    $("#countryMessage").html("");
                }
            });
        }

        function removeProfActsAlert() {
            $(".professionalActivity").each(function () {
                $(this).on("click", function () {
                    if ($(this).length > 0) {
                        $("#containerProfActs").removeClass("errorBackgroundColor error");
                        $("#profActsMessage").html("");
                    }
                });
            });
        }


        function removeBillingNameAlert() {
            $("#txtFacturacionNombreCliente").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#billingNameMessage").html("");
                }
            });
        }

        function removeBillingAddressAlert() {
            $("#txtFacturacionDireccion").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#addressMessage").html("");
                }
            });
        }

        function removeBillingPostcodeAlert() {
            $("#txtFacturacionCodigoPostal").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#postcodeMessage").html("");
                }
            });
        }

        function removeBillingCityAlert() {
            $("#txtFacturacionCiudad").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#cityMessage").html("");
                }
            });
        }


        function removeTaxIdTypeAlert() {
            $("#tax_id_type").on("change", function () {
                if ($(this).val() !== "-1") {
                    $(this).removeClass("errorBorderColor error");
                    $("#billingTaxIdTypeMessage").html("");
                }
            });
        }

        function removeTaxIdNumberAlert() {
            $("#tax_id_number").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#billingTaxIdNumberMessage").html("");
                }
            });
        }

        function removePaymentAlert() {
            $(".paymentMethod").on("click", function () {
                if ($(this).prop("checked") !== false) {
                    $("#containerPaymentMethod").removeClass("errorBackgroundColor error");
                    $("#paymentMethodMessage").html("");
                }
            });
        }

        function removePrivacyAlert() {
            $("#chkPrivacy").on("click", function () {
                if ($(this).prop("checked") !== false) {
                    $("#containerPrivacyCheck").removeClass("errorBackgroundColor error");
                    $("#privacyMessage").html("");
                }
            });
        }

        //ON SUBMIT, validate required fields
        function validateMembershipForm() {
            $("#frmMembership").on("submit", function (event) {

                // Stop form submission
                event.preventDefault();
                event.stopPropagation();

                let username = $("#txtEmailUser");
                let emailRegExp = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
                let pass = $("#txtPasswd");
                let rePass = $("#txtRePasswd");
                let firstName = $("#txtNombre");
                let lastName = $("#txtApellidos");
                let country = $("#cmbPais");
                let profActs = $(".professionalActivity:checked");
                let billingNif = $("#txtFacturacionNifCliente");
                let billingName = $("#txtFacturacionNombreCliente");
                let billingAddress = $("#txtFacturacionDireccion");
                let billingPostcode = $("#txtFacturacionCodigoPostal");
                let billingCity = $("#txtFacturacionCiudad");
                let billingCountry = $("#txtFacturacionPais");
                let paymentMethod = $(".paymentMethod:checked");
                let privacy = $("#chkPrivacy");
               	let payCode = $("#paymentCode");
              
              	if (payCode.val().toLowerCase().trim() === "{STATIC_DISCOUNT_MEMBERSHIP}") {                  
					document.getElementById("transfer").checked = true;
					document.getElementById("paypal").checked = false;
				} else {
					document.getElementById("transfer").checked = false;
					document.getElementById("paypal").checked = true;
				}

                //If any fields are invalid, display alert and message
                if (username.val() === "" || emailRegExp.test(username.val()) === false) {
                    username.addClass("errorBorderColor error");
                    $("#emailUserMessage").html("Please enter a valid email address");
                }
                if (pass.val() === "") {
                    pass.addClass("errorBorderColor error");
                    $("#passwordMessage").html("Please enter password");
                }
                if (rePass.val() === "") {
                    rePass.addClass("errorBorderColor error");
                    $("#confirmPasswordMessage").html("Please confirm password");
                }
                if (pass.val() !== "" && rePass.val() !== "" && pass.val() !== rePass.val()) {
                    rePass.addClass("errorBorderColor error");
                    $("#passwordMatchMessage").html("Passwords must match");
                }
                if (firstName.val() === "") {
                    firstName.addClass("errorBorderColor error");
                    $("#firstNameMessage").html("Please enter your first name");
                }
                if (lastName.val() === "") {
                    lastName.addClass("errorBorderColor error");
                    $("#lastNameMessage").html("Please enter your last name(s)");
                }
                if (country.val() < 0) {
                    country.addClass("errorBorderColor error");
                    $("#countryMessage").html("Please select a country");
                }
                if (profActs.length < 1) {
                    $("#containerProfActs").addClass("errorBackgroundColor error");
                    $("#profActsMessage").html("Please select at least one activity");
                }

                // Only validate billing fields if invoice type is "business"
                let invoiceType = $('input[name="invoiceType"]:checked').val();

                // Tax ID field variables
                let billingCountrySelect = $("#billing_country");
                let taxIdType = $("#tax_id_type");
                let taxIdNumber = $("#tax_id_number");

                if (invoiceType !== 'individual') {
                    if (billingName.val() === "") {
                        billingName.addClass("errorBorderColor error");
                        $("#billingNameMessage").html("Please enter your name for billing purposes");
                    }
                    if (billingAddress.val() === "") {
                        billingAddress.addClass("errorBorderColor error");
                        $("#addressMessage").html("Please enter your address");
                    }
                    if (billingPostcode.val() === "") {
                        billingPostcode.addClass("errorBorderColor error");
                        $("#postcodeMessage").html("Please enter your postal code");
                    }
                    if (billingCity.val() === "") {
                        billingCity.addClass("errorBorderColor error");
                        $("#cityMessage").html("Please enter your town or city");
                    }

                    // Validate billing country dropdown
                    if (billingCountrySelect.val() === "-1" || billingCountrySelect.val() === null || billingCountrySelect.val() === "") {
                        billingCountrySelect.addClass("errorBorderColor error");
                        $("#billingCountryMessage").html("Please select your billing country");
                    }
                    // Validate tax ID type
                    if (taxIdType.val() === "-1" || taxIdType.val() === null || taxIdType.val() === "") {
                        taxIdType.addClass("errorBorderColor error");
                        $("#billingTaxIdTypeMessage").html("Please select your tax ID type");
                    }
                    // Validate tax ID number
                    if (taxIdNumber.val() === "") {
                        taxIdNumber.addClass("errorBorderColor error");
                        $("#billingTaxIdNumberMessage").html("Please enter your tax ID number");
                    }
                }

                if (paymentMethod.length < 1) {
                    $("#containerPaymentMethod").addClass("errorBackgroundColor error");
                    $("#paymentMethodMessage").html("Please select a payment method");
                }
                if (privacy.prop("checked") === false) {
                    $("#containerPrivacyCheck").addClass("errorBackgroundColor error");
                    $("#privacyMessage").html("To submit the form, you must accept MET's privacy policy");
                }

                //If any fields are invalid, scroll to first invalid input or checkbox, with animation
                let invalidInput = $(".error");
                if (invalidInput.length > 0) {
                    $("html, body").animate({
                        scrollTop: invalidInput.first().offset().top - 20
                    }, 800);
                } else {

                    //Store choices (prof activities and work situations) in hidden element
                    let cadenaActividades = "";
                    profActs.each(function (index, valor) {
                        cadenaActividades += valor.value + ",";
                    });
                    cadenaActividades = cadenaActividades.substring(0, cadenaActividades.length - 1);
                    document.frmMembership.hdnIdActividadProfesional.value = cadenaActividades;

                    let cadenaSituacionesLaborales = "";
                    $(".workSituation:checked").each(function (index, valor) {
                        cadenaSituacionesLaborales += valor.value + ",";
                    });
                    cadenaSituacionesLaborales = cadenaSituacionesLaborales.substring(0, cadenaSituacionesLaborales.length - 1);
                    document.frmMembership.hdnIdSituacionLaboral.value = cadenaSituacionesLaborales;

                    //Run function to block user interface via blockUI.js and display Sendingâ€¦ message
                    mensajeCargando("{STATIC_GLOBAL_SENDING}...");

                    //Run function to generate registration (AJAX call to save_inscription)
                    generateMemberRegistration();
                }

            });
        }

        //ON PAGE LOAD, add event listeners
        $(document).ready(function () {
            removeUsernameAlert();
            removePasswordAlert();
            removeConfirmPasswordAlert();
            removeMatchPasswordsAlert();
            removeMatchPasswordsAlertReverse();
            removeFirstNameAlert();
            removeLastNameameAlert();
            removeCountryAlert();
            removeProfActsAlert();
            removeBillingNameAlert();
            removeBillingAddressAlert();
            removeBillingPostcodeAlert();
            removeBillingCityAlert();
            removeBillingCountryAlert();
            removeTaxIdTypeAlert();
            removeTaxIdNumberAlert();
            removePaymentAlert();
            removePrivacyAlert();
            validateMembershipForm();
            supports_input_placeholder();
        });

// EU detection and tax_id_type filtering for membership form
$(function () {
    var $billingCountry = $('#billing_country');
    var $taxType = $('#tax_id_type');

    if (!$billingCountry.length || !$taxType.length) {
        return;
    }

    // Store all tax_id_type options for filtering
    var allTaxTypeOptions = $taxType.find('option').clone();

    // Handle country change - adjust tax_id_type options based on EU status
    // Tax ID type codes: 02 = EU VAT, 06 = Other
    function handleCountryChange() {
        var $selected = $billingCountry.find(':selected');
        var countryVal = $billingCountry.val();
        var isEU = $selected.data('is-eu') == 1;
        var noCountrySelected = (countryVal === '-1' || countryVal === null || countryVal === '');

        // Clear current options and rebuild
        $taxType.empty();

        if (noCountrySelected) {
            // No country selected: show only placeholder
            allTaxTypeOptions.each(function() {
                var $opt = $(this);
                var optVal = $opt.val();
                if (optVal === '-1' || optVal === '') {
                    $taxType.append($opt.clone());
                }
            });
        } else if (isEU) {
            // EU countries: show "EU VAT number" (02) and "Other" (06), pre-select EU VAT
            allTaxTypeOptions.each(function() {
                var $opt = $(this);
                var optVal = $opt.val();
                if (optVal === '02' || optVal === '06') {
                    $taxType.append($opt.clone());
                }
            });
            $taxType.val('02');
        } else {
            // Non-EU country selected: show only "Other" (06), pre-selected
            allTaxTypeOptions.each(function() {
                var $opt = $(this);
                var optVal = $opt.val();
                if (optVal === '06') {
                    $taxType.append($opt.clone());
                }
            });
            $taxType.val('06');
        }
    }

    // Initialize on page load
    handleCountryChange();

    // Update on country change
    $billingCountry.on('change', handleCountryChange);
});

// Clear billing country alert
function removeBillingCountryAlert() {
    $("#billing_country").on("change", function () {
        if ($(this).val() !== "-1" && $(this).val() !== null && $(this).val() !== "") {
            $(this).removeClass("errorBorderColor error");
            $("#billingCountryMessage").html("");
        }
    });
}

// Invoice type toggle (individual vs business) functionality
$(function () {
    var $invoiceTypeRadios = $('input[name="invoiceType"]');
    var $billingContainer = $('#billingDetailsContainer');
    var $billingFields = $billingContainer.find('input, select');

    function toggleBillingDetails() {
        var selectedType = $('input[name="invoiceType"]:checked').val();

        if (selectedType === 'individual') {
            // Hide billing details for private individuals
            $billingContainer.hide();

            // Remove required class from all billing fields
            $billingContainer.find('.required').removeClass('required').addClass('was-required');
            $billingContainer.find('[required]').removeAttr('required').addClass('was-required-attr');

            // Clear validation messages
            $billingContainer.find('.validationMessage').html('');
            $billingContainer.find('.error').removeClass('error errorBorderColor');
        } else {
            // Show billing details for business/professional
            $billingContainer.show();

            // Restore required class to billing fields
            $billingContainer.find('.was-required').removeClass('was-required').addClass('required');
            $billingContainer.find('.was-required-attr').attr('required', true).removeClass('was-required-attr');
        }
    }

    // Initialize on page load
    toggleBillingDetails();

    // Toggle on radio change
    $invoiceTypeRadios.on('change', toggleBillingDetails);
});

        function generateMemberRegistration() {
            let form = $("#frmMembership");
            let signupResult;
            $.ajax({
                type: "POST",
                url: "ajax/save_inscription",
                data: form.serialize(),
                success: function (data) {
                    document.getElementById("resultadoInscripcion").innerHTML = data;
                    signupResult = document.getElementById("hdnTipoResultado");


                    if (signupResult.value === "1") {
                        window.location = "inscripcion_finalizada?tipo=1";


                    } else if (signupResult.value === "2") {
                        let item = document.getElementById("item").value;
                        window.location = "/proceed?it=" + item;


                    } else if (signupResult.value === "4") {
                        window.location = "inscripcion_finalizada?tipo=4";


                    } else {
                        let msgContenido = document.getElementById("msgAlert");
                        msgContenido.innerHTML = signupResult.value;
                        msgContenido.setAttribute("class", "msgKO");
                        msgContenido.style.display = "block";
                        moverWeb();
                        $.unblockUI();
                    }
                }
            });
        }

        <!-- END: validate_membership_form -->

        <!-- BEGIN: validate_renew_membership_form -->
        //Default HTML5 validation is used because the form is much simpler

$(function () {
  // 1) Globals and cached nodes
  var $form           = $('#frmMembership');
  var $billingCountry = $('#billing_country');
  var $taxType        = $('#tax_id_type');
  var $taxNumber      = $('#tax_id_number');

  // Store all tax_id_type options for filtering
  var allTaxTypeOptions = $taxType.find('option').clone();

  // 2) Helpers
  function clearPaymentMethodWarning() {
    $('.paymentMethod').on('click', function () {
      if ($(this).prop('checked')) {
        $('#paymentMethodMessage').html('');
        $('#containerPaymentMethod').removeClass('errorBackgroundColor');
      }
    });
  }

  // Handle country change - adjust tax_id_type options based on EU status
  // Tax ID type codes: 02 = EU VAT, 06 = Other
  function handleCountryChange() {
    var $selected = $billingCountry.find(':selected');
    var countryVal = $billingCountry.val();
    var isEU = $selected.data('is-eu') == 1;
    var noCountrySelected = (countryVal === '-1' || countryVal === null || countryVal === '');

    // Clear current options and rebuild
    $taxType.empty();

    if (noCountrySelected) {
      // No country selected: show only placeholder
      allTaxTypeOptions.each(function() {
        var $opt = $(this);
        var optVal = $opt.val();
        if (optVal === '-1' || optVal === '') {
          $taxType.append($opt.clone());
        }
      });
    } else if (isEU) {
      // EU countries: show "EU VAT number" (02) and "Other" (06), pre-select EU VAT
      allTaxTypeOptions.each(function() {
        var $opt = $(this);
        var optVal = $opt.val();
        if (optVal === '02' || optVal === '06') {
          $taxType.append($opt.clone());
        }
      });
      $taxType.val('02');
    } else {
      // Non-EU country selected: show only "Other" (06), pre-selected
      allTaxTypeOptions.each(function() {
        var $opt = $(this);
        var optVal = $opt.val();
        if (optVal === '06') {
          $taxType.append($opt.clone());
        }
      });
      $taxType.val('06');
    }
  }

  // Invoice type toggle (individual vs business)
  var $invoiceTypeRadios = $('input[name="invoiceType"]');
  var $billingContainer = $('#billingDetailsContainer');

  function toggleBillingDetails() {
    var selectedType = $('input[name="invoiceType"]:checked').val();

    if (selectedType === 'individual') {
      // Hide billing details for private individuals
      $billingContainer.hide();

      // Remove required attribute from billing fields
      $billingContainer.find('[required]').removeAttr('required').addClass('was-required-attr');
      $billingContainer.find('.required').removeClass('required').addClass('was-required');

      // Clear validation messages and errors
      $billingContainer.find('.validationMessage').html('');
      $billingContainer.find('.invalid-feedback').hide();
      $billingContainer.find('.error').removeClass('error errorBorderColor');
    } else {
      // Show billing details for business/professional
      $billingContainer.show();

      // Restore required attribute to billing fields
      $billingContainer.find('.was-required-attr').attr('required', true).removeClass('was-required-attr');
      $billingContainer.find('.was-required').addClass('required').removeClass('was-required');
    }
  }

  // 3) Initialize state
  toggleBillingDetails();
  handleCountryChange(); // Set initial tax_id_type options based on pre-selected country

  // 4) Event listeners
  clearPaymentMethodWarning();
  $invoiceTypeRadios.on('change', toggleBillingDetails);
  $billingCountry.on('change', handleCountryChange);

  // 5) Form submit handler
  $form.on('submit', function (event) {
    event.preventDefault();
    event.stopPropagation();

    var payCode = $('#paymentCode');
    // Default payment method based on code
    if (payCode.val().toLowerCase().trim() === '{STATIC_DISCOUNT_RENEW_MEMBERSHIP}') {
      $('#transfer').prop('checked', true);
      $('#paypal').prop('checked', false);
    } else {
      $('#transfer').prop('checked', false);
      $('#paypal').prop('checked', true);
    }

    // Check at least one payment method
    if ($('.paymentMethod:checked').length < 1) {
      $('#paymentMethodMessage').html('Please select a payment method');
      $('#containerPaymentMethod').addClass('errorBackgroundColor');
    }

    // Clear previous error styles/messages
    $('#billingCountryMessage').html('');
    $billingCountry.removeClass('errorBorderColor error');

    $('#billingTaxIdTypeMessage').html('');
    $taxType.removeClass('errorBorderColor error');

    $('#billingTaxIdNumberMessage').html('');
    $taxNumber.removeClass('errorBorderColor error');

    // Validate Tax ID fields (only if invoice type is not individual)
    var isValidTaxId = true;
    var selectedInvoiceType = $('input[name="invoiceType"]:checked').val();

    if (selectedInvoiceType !== 'individual') {
      // Validate billing country
      if ($billingCountry.val() === '-1' || $billingCountry.val() === null || $billingCountry.val() === '') {
        $billingCountry.addClass('errorBorderColor error');
        $('#billingCountryMessage').html('Please select your billing country');
        isValidTaxId = false;
      }
      // Validate tax ID type
      if ($taxType.val() === '-1' || $taxType.val() === null || $taxType.val() === '') {
        $taxType.addClass('errorBorderColor error');
        $('#billingTaxIdTypeMessage').html('Please select your tax ID type');
        isValidTaxId = false;
      }
      // Validate tax ID number
      if (!$taxNumber.val() || !$taxNumber.val().trim()) {
        $taxNumber.addClass('errorBorderColor error');
        $('#billingTaxIdNumberMessage').html('Please enter your tax ID number');
        isValidTaxId = false;
      }
    }

    // HTML5 validity check (Bootstrap-style)
    if (this.checkValidity() === false || !isValidTaxId) {
      this.classList.add('was-validated');
      return;
    }

    // Block UI + submit via AJAX
    if (typeof mensajeCargando === 'function') {
      mensajeCargando('{STATIC_GLOBAL_SENDING}...');
    }
    generateMembershipRenewal();
  });

  // 6) AJAX submit
  function generateMembershipRenewal() {
    var renewalResult;
    $.ajax({
      type: 'POST',
      url: 'ajax/save_renew_inscription',
      data: $form.serialize(),
      success: function (data) {
        $('#resultadoInscripcion').html(data);
        renewalResult = document.getElementById('hdnTipoResultado');

        if (renewalResult && renewalResult.value === '1') {
          window.location = 'inscripcion_finalizada?tipo=1';

        } else if (renewalResult && renewalResult.value === '2') {
          var item = $('#item').val();
          window.location = '/proceed?it=' + item;

        } else if (renewalResult && renewalResult.value === '4') {
          window.location = 'inscripcion_finalizada?tipo=4';

        } else {
          var $msg = $('#msgAlert');
          if (renewalResult) {
            $msg.html(renewalResult.value);
          }
          $msg.attr('class', 'msgKO').show();
          if (typeof moverWeb === 'function') moverWeb();
          if ($.unblockUI) $.unblockUI();
        }
      }
    });
  }
});
        <!-- END: validate_renew_membership_form -->
        <!-- BEGIN: validate_workshop_registration_form -->

        //ON CLICK in any workshop checkbox, recalculate total price
        function calculatePriceWorkshops() {
            let thisWorkshopPrice;
            $(".workshopChoice").each(function () {
                $(this).on("click", function () {
                    let totalPrice = parseFloat(document.getElementById("totalPayable").innerHTML);
                    let workshopId = this.name.split("_")[1];
                    let loggedIn = document.getElementById("hdnIdLogin");
                    if (loggedIn) {
                        thisWorkshopPrice = parseFloat(document.getElementById("priceMember_" + workshopId).innerHTML);
                    } else {
                        if ($("#cmbAsociacionHermana").val() < 0) {
                            thisWorkshopPrice = parseFloat(document.getElementById("priceNonMember_" + workshopId).innerHTML);
                        } else {
                            thisWorkshopPrice = parseFloat(document.getElementById("priceSister_" + workshopId).innerHTML);
                        }
                    }
                    if (this.checked) {
                        totalPrice += thisWorkshopPrice;
                    } else {
                        totalPrice -= thisWorkshopPrice;
                    }
                    document.getElementById("totalPayable").innerHTML = String(totalPrice);
                });
            });
        }

        //ON CHANGE, calculate total price when sister association selected (unselected)
        function updatePriceSisterAssoc() {
            let rateApplicable;
            let sisterAssociation = document.frmWorkshopRegister.cmbAsociacionHermana;
            sisterAssociation.addEventListener("change", function () {
                let totalPrice = 0;
                if (this.value < 0) {
                    rateApplicable = "priceNonMember_";
                } else {
                    rateApplicable = "priceSister_";
                }
                //Get ID of each workshop and test if checked
                $(".workshopChoice").each(function () {
                    let workshopId = this.name.split("_")[1];
                    if (this.checked) {
                        //Get price from form, converting string to number, and add to total
                        totalPrice += parseFloat(document.getElementById(rateApplicable + workshopId).innerHTML);
                    }
                });
                //Assign total to "totalPayable" element for display
                $("#totalPayable").html(totalPrice);
            });
        }

        /*
        function refreshCaptchaWorkshop() {
            document.getElementById("reloadCaptcha").addEventListener("click", function () {
                document.getElementById("imageCaptcha").src = "classes/securimage/securimage_show?sid=" + Math.random();
                document.getElementById("imageCaptcha").value = "";
            });
        }
        */

        function clearEmailAlert() {
            $("#txtEmail").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#emailMessage").html("");
                }
            });
        }

        function clearFirstNameAlert() {
            $("#txtNombre").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#firstNameMessage").html("");
                }
            });
        }

        function clearLastNameAlert() {
            $("#txtApellidos").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#lastNameMessage").html("");
                }
            });
        }

        function clearWorkshopAlert() {
            $(".workshopChoice").each(function () {
                $(this).on("click", function (event) {
                    if ($(".workshopChoice:checked").length > 0 && $(".parallelAm:checked").length < 2 && $(".parallelPm:checked").length < 2) {
                        $("#containerWorkshop").removeClass("errorBackgroundColor error");
                        $("#workshopMessage").html("");
                    }
                });
            });
        }

        function clearNifAlert() {
            $("#txtFacturacionNifCliente").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#nifMessage").html("");
                }
            });
        }

        function clearBillingNameAlert() {
            $("#txtFacturacionNombreCliente").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#billingNameMessage").html("");
                }
            });
        }

        function clearBillingAddressAlert() {
            $("#txtFacturacionDireccion").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#addressMessage").html("");
                }
            });
        }

        function clearBillingPostcodeAlert() {
            $("#txtFacturacionCodigoPostal").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#postcodeMessage").html("");
                }
            });
        }

        function clearBillingCityAlert() {
            $("#txtFacturacionCiudad").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#cityMessage").html("");
                }
            });
        }

        function clearBillingCountryAlert() {
            $("#txtFacturacionPais").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#billingCountryMessage").html("");
                }
            });
        }

        function clearPaymentAlert() {
            $(".paymentMethod").on("click", function () {
                if ($(this).prop("checked") !== false) {
                    $("#containerPaymentMethod").removeClass("errorBackgroundColor error");
                    $("#paymentMethodMessage").html("");
                }
            });
        }

        function clearPrivacyAlert() {
            $("#chkPrivacy").on("click", function () {
                if ($(this).prop("checked") !== false) {
                    $("#containerPrivacyCheck").removeClass("errorBackgroundColor error");
                    $("#privacyMessage").html("");
                }
            });
        }

		function clearPrivacyAlert2() {
            $("#chkEmailPermission").on("click", function () {
                if ($(this).prop("checked") !== false) {
                    $("#containerPrivacyCheck2").removeClass("errorBackgroundColor error");
                    $("#privacyMessage").html("");
                }
            });
        }
      
        /*
        function clearCaptchaAlert() {
            $("#txtCaptcha").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#captchaMessage").html("");
                }
            });
        }
        */

        function validateWorkshopForm() {
            $("#frmWorkshopRegister").on("submit", function (event) {
                event.preventDefault();
                event.stopPropagation();

                let firstName = $("#txtNombre");
                let lastName = $("#txtApellidos");
                let email = $("#txtEmail");
                let emailRegExp = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
                let workshopContainer = $("#containerWorkshop");
                let workshopChoice = $(".workshopChoice:checked");
                let parallelWorkshopsAm = $(".parallelAm:checked");
                let parallelWorkshopsPm = $(".parallelPm:checked");
                let billingNif = $("#txtFacturacionNifCliente");
                let billingName = $("#txtFacturacionNombreCliente");
                let billingAddress = $("#txtFacturacionDireccion");
                let billingPostcode = $("#txtFacturacionCodigoPostal");
                let billingCity = $("#txtFacturacionCiudad");
                let billingCountry = $("#txtFacturacionPais");
                let paymentMethod = $(".paymentMethod:checked");
                let privacy = $("#chkPrivacy");
              	let privacy2 = $("#chkEmailPermission");
                //let captchaText = $("#txtCaptcha");
              	let payCode = $("#paymentCode");
              
              	if (payCode.val().toLowerCase().trim() === "{STATIC_DISCOUNT_WORKSHOP}") {                  
					document.getElementById("transfer").checked = true;
					document.getElementById("paypal").checked = false;
				} else {
					document.getElementById("transfer").checked = false;
					document.getElementById("paypal").checked = true;
				}
              
              	// if (totalPrice == 0) {
				//	document.getElementById("transfer").checked = true;
				//	document.getElementById("paypal").checked = false;
				//}

                if (firstName.val() === "") {
                    firstName.addClass("errorBorderColor error");
                    $("#firstNameMessage").html("Please enter your first name");
                }
                if (lastName.val() === "") {
                    lastName.addClass("errorBorderColor error");
                    $("#lastNameMessage").html("Please enter your last name(s)");
                }
                if (email.val() === "" || emailRegExp.test(email.val()) === false) {
                    email.addClass("errorBorderColor error");
                    $("#emailMessage").html("Please enter a valid email address");
                }
                if (workshopChoice.length < 1) {
                    workshopContainer.addClass("errorBackgroundColor error");
                    $("#workshopMessage").html("Please select a workshop");
                }
                if (parallelWorkshopsAm.length > 1 || parallelWorkshopsPm.length > 1) {
                    workshopContainer.addClass("errorBackgroundColor error");
                    $("#workshopMessage").html("Your training choices clash. Please select no more than one parallel session.");
                }
                if (billingNif.val() === "") {
                    billingNif.addClass("errorBorderColor error");
                    $("#nifMessage").html("Please enter your tax ID or VAT number");
                }
                if (billingName.val() === "") {
                    billingName.addClass("errorBorderColor error");
                    $("#billingNameMessage").html("Please enter your name for billing purposes");
                }
                if (billingAddress.val() === "") {
                    billingAddress.addClass("errorBorderColor error");
                    $("#addressMessage").html("Please enter your address");
                }
                if (billingPostcode.val() === "") {
                    billingPostcode.addClass("errorBorderColor error");
                    $("#postcodeMessage").html("Please enter your postal code");
                }
                if (billingCity.val() === "") {
                    billingCity.addClass("errorBorderColor error");
                    $("#cityMessage").html("Please enter your town or city");
                }
                if (billingCountry.val() === "") {
                    billingCountry.addClass("errorBorderColor error");
                    $("#billingCountryMessage").html("Please enter your country");
                }
                if (paymentMethod.length < 1) {
                    $("#paymentMethodMessage").html("Please select a payment method");
                    $("#containerPaymentMethod").addClass("errorBackgroundColor error");
                }
                if (privacy.prop("checked") === false) {
                    $("#privacyMessage").html("To submit the form, you must accept MET's privacy policy");
                    $("#containerPrivacyCheck").addClass("errorBackgroundColor error");
                }
              	if (privacy2.prop("checked") === false) {
                    $("#privacyMessage2").html("To submit the form, you must allow use of your name and image");
                    $("#containerPrivacyCheck2").addClass("errorBackgroundColor error");
                }
                /*
                if (captchaText.val() === "") {
                    captchaText.addClass("errorBorderColor error");
                    $("#captchaMessage").html("Please enter the characters from the image");
                }
                */

                //If no. of inputs with class "error" > 0, scroll to first invalid input, with animation
                let invalidInput = $(".error");
                if (invalidInput.length > 0) {
                    $("html, body").animate({
                        scrollTop: invalidInput.first().offset().top - 20
                    }, 800);
                } else {
                    //If all client-side validations are OK, store workshop choices (IDs) in hidden element
                    let workshopChoices = "";
                    let workshops = document.getElementsByClassName("workshopChoice");
                    for (let i = 0; i < workshops.length; i++) {
                        if (workshops[i].checked) {
                            let workshopId = workshops[i].name.split("_")[1];
                            workshopChoices += workshopId + ",";
                        }
                    }
                    //Remove trailing comma (last character) from list of workshop IDs
                    workshopChoices = workshopChoices.substring(0, workshopChoices.length - 1);
                    document.frmWorkshopRegister.hdnIdTaller.value = workshopChoices;
                  
                    //Block user interface (for bank transfer only)
                    mensajeCargando("{STATIC_GLOBAL_SENDING}...");

                    //Generate workshop registration (Ajax call in save_inscription_workshop)
                    generateWorkshopRegistration();
                }
            });
        }

        var aymclicked = 0;
      	function areyoumember() {
  			if(aymclicked === 0) {
			  alert("If you're a MET member, sign in before registering.");
            }
            aymclicked = 1;
		}
      
        //ON PAGE LOAD, add event listeners
        $(document).ready(function () {
            calculatePriceWorkshops();
            updatePriceSisterAssoc();
            //refreshCaptchaWorkshop();
            clearEmailAlert();
            clearFirstNameAlert();
            clearLastNameAlert();
            clearWorkshopAlert();
            clearNifAlert();
            clearBillingNameAlert();
            clearBillingAddressAlert();
            clearBillingPostcodeAlert();
            clearBillingCityAlert();
            clearBillingCountryAlert();
            clearPaymentAlert();
            clearPrivacyAlert();
            //clearCaptchaAlert();
          	clearPrivacyAlert2();
            validateWorkshopForm();
            supports_input_placeholder();
            /* Add class "parallelAm" or "parallelPm" to specified parallel workshops */
            $("#chkWorkshop_288").addClass("parallelAm");
            $("#chkWorkshop_289").addClass("parallelAm");
            $("#chkWorkshop_290").addClass("parallelAm");
            // $("#chkWorkshop_257").addClass("parallelAm");
            // $("#chkWorkshop_258").addClass("parallelPm");
            // $("#chkWorkshop_259").addClass("parallelPm");
        });

        /*
        * Serialises form data and sends it to save_inscription_workshop
        */
        function generateWorkshopRegistration(event) {
            let form = $("#frmWorkshopRegister");
            let signupResult;
            let msgContenido = document.getElementById("msgAlert");
            $.ajax({
                type: "POST",
                url: "ajax/save_inscription_workshop",
                data: form.serialize(),
                success: function (data) {
                    //data is the contents of process_form.html, e.g.
                    //<input type="hidden" name="hdnTipoResultado" id="hdnTipoResultado" value="2">
                    //<input type="hidden" name="item" id="item" value="Workshop registration">
                    //Store result of AJAX call (process_form.html) in a DIV in workshop registration form
                    //Store payment method (hdnTipoResultado) or error message in a variable ($signupResult)
                    document.getElementById("resultadoInscripcion").innerHTML = data;
                    signupResult = document.getElementById("hdnTipoResultado");

                    if (signupResult.value === "1") {
                        window.location = "inscripcion_finalizada?modo=2&tipo=1";

                    } else if (signupResult.value === "2") {
                        let item = document.getElementById("item").value;
                        window.location = "/proceed?it=" + item;
						
                    } else {
                        let captchaMessage = document.getElementById("captchaMessage");
                        captchaMessage.innerHTML = signupResult.value;
                        $.unblockUI();
                    }
                }
            });
        }

        <!-- END: validate_workshop_registration_form -->

        <!-- BEGIN: validate_conference_registration_form -->
          
        var aymclicked = 0;
      	function areyoumember() {
  			if(aymclicked === 0) {
			  alert("If you're a MET member, sign in before registering.");
            }
            aymclicked = 1;
		}        

        function reloadCaptchaConference() {
            $("#reloadCaptcha").on("click", function () {
                $("#imageCaptcha").attr("src", "classes/securimage/securimage_show?sid=" + Math.random()).value = "";
            });
        }

        function unsetFirstNameAlert() {
            $("#txtNombre").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#firstNameMessage").html("");
                }
            });
        }

        function unsetLastNameAlert() {
            $("#txtApellidos").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#lastNameMessage").html("");
                }
            });
        }

        function unsetEmailAlert() {
            $("#txtEmail").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#emailMessage").html("");
                }
            });
        }
/*      
function validateTelNo(telno) {
    if (/^\d+$/.test(telno) && !telno.startsWith("+")) {
        return "Error: Invalid phone number format.";
    }
    return "";
}

function unsetTelNoAlert() {
    $("#txtTelefono").on("keyup", function () {
        const telno = $(this).val();
        const validationResult = validateTelNo(telno);
        
        if (validationResult === "") {
            $(this).removeClass("errorBorderColor error");
            $("#telNoMessage").html("");
        }
    });
}
*/
        function unsetCountryAlert() {
            $("#cmbPais").on("change", function () {
                if ($(this).val() > -1) {
                    $(this).removeClass("errorBorderColor error");
                    $("#countryMessage").html("");
                }
            });
        }
/*      
      	function unsetDietAlert() {
            $("#cmbDiet").on("change", function () {
                if ($(this).val() > 0) {
                    $(this).removeClass("errorBorderColor error");
                    $("#dietMessage").html("");
                }
            });
        }
*/
        function updatePriceSister() {
            $("#cmbAsociacionHermana").on("change", function () {
                recalculateTotalPrice();
            });
        }

        function updatePriceSpeaker() {
            // $("#chkSpeaker").on("change", function () {
            $("#cmbSpeaker").on("change", function () {
                recalculateTotalPrice();
            });
        }

        function deselectRadioButtons() {
            //Add a click event listener to each workshop radio button
            $(".rdnWorkshop").each(function () {
                $(this).on("click", function () {
                    //Get hidden date input corresponding to date of clicked radio button
                    let hidden = document.getElementById("hdnFecha_" + this.name.split("_")[1]);
                    //store initial hidden value
                    let hiddenInitialValue = hidden.value;
                    //Reset hidden value to value of clicked radio button ("" or "[id_taller_fecha]")
                    hidden.value = this.value;

                    //If initial hidden value not empty (i.e. a radio button is checked)
                    if (hiddenInitialValue !== "") {
                        //If stored hidden value is equal to reset hidden value (i.e. same button!)
                        if (hiddenInitialValue === hidden.value) {
                            //Uncheck clicked radio button
                            this.checked = false;
                            //Set hidden value to empty
                            hidden.value = "";
                        }
                    }
                    recalculateTotalPrice()
                });
            });
        }

        function disableMinisessions() {
            $(".rdnWorkshop").each(function () {
                $(this).on("click", function (event) {
                    let workshopDate = this.name.split("_")[1];
                    let minisessions = $(".minisessionChoice_" + workshopDate);
                    if (this.checked) {
                        minisessions.prop("checked", false);
                        minisessions.prop("disabled", true);
                        $("#workshopsMessage").html("");
                        $("#containerWorkshop").removeClass("errorBackgroundColor error");
                    } else {
                        //Enable all the minisession inputs on this date
                        minisessions.prop("disabled", false);
                    }
                    recalculateTotalPrice()
                });
            });
        }

        function unsetWorkshopsAlert() {
            $(".chkMinisession").each(function () {
                $(this).on("click", function (event) {
                  let workshopDate = this.name.split("_")[1];
				  let hidden = document.getElementById("hdnFecha_" + workshopDate);
                  let hiddenInitialValue = hidden.value;
                  hidden.value = this.value;
                  let minisessions = $(".minisessionChoice_" + workshopDate);
                    if ($(".chkMinisession:checked").length > 0) {
                        $("#workshopsMessage").html("");
                        $("#containerWorkshop").removeClass("errorBackgroundColor error");
                    }
                  if (hiddenInitialValue !== "") {
                        //Activate the line below to limit the minisession choices to a maximum of one (and change to radio buttons on the form - form_conference_register_metm.html)
                        //minisessions.prop("checked", false);
                        //If stored hidden value is equal to reset hidden value (i.e. same button!)
                        if (hiddenInitialValue === hidden.value) {
                            //Uncheck clicked radio button
                            this.checked = false;
                            //Set hidden value to empty
                            hidden.value = "";
                        } else {
                          this.checked = true;
                        }
                    }
                    recalculateTotalPrice()
                });
            });
        }
/*      
        function unsetWorkshopsAlert() {
            $(".chkMinisession").each(function () {
                $(this).on("click", function (event) {
                    if ($(".chkMinisession:checked").length > 0) {
                        $("#workshopsMessage").html("");
                        $("#containerWorkshop").removeClass("errorBackgroundColor error");
                    }
                    recalculateTotalPrice()
                });
            });
        }
*/
        function setThreeMinisessionsAlert() {
            $(".chkMinisession").each(function () {
                $(this).on("click", function (event) {
                    let miniDate = this.name.split("_")[1];
                    let minisessionContainer = $("#container_mini_session_" + miniDate);
                    let numChecked = minisessionContainer.find("input[type=checkbox]:checked").length;
                    if (numChecked >= 1) {
                        $("#maxMinisessionsMessage").html("Please select no more than two minisessions on any one day");
                        $(minisessionContainer).addClass("errorBackgroundColor error");
                    } else {
                        $("#maxMinisessionsMessage").html("");
                        $(minisessionContainer).removeClass("errorBackgroundColor error");
                    }
                });
            });
        }
/*
        function disableAllWorkshops() {
            $("#chkNotWorkshop").on("click", function () {
                if (this.checked) {
                    $(".rdnWorkshop").prop("disabled", true).prop("checked", false);
                    $("input.hiddenDate").val("");
                    $(".chkMinisession").prop("disabled", true).prop("checked", false);
                    $("#workshopsMessage").html("");
                    $("#containerWorkshop").removeClass("errorBackgroundColor error").removeClass("warningBackgroundColor");
                } else {
                    $(".rdnWorkshop").prop("disabled", false);
                    $(".chkMinisession").prop("disabled", false);
                }
                recalculateTotalPrice();
            });
        }
*/
        function unsetBadgeAlert() {
            let badgeText = $("#txtaBadge");
            badgeText.on("keyup", function () {
                if ($("#txtaBadge").val()) {
                    $("#badgeMessage").html("");
                    badgeText.removeClass("errorBorderColor error");
                }
            });
        }

        function priceDinnerGuests() {
            $("#cmbInvitados").on("change", function () {
                recalculateTotalPrice();
            });
        }

        function priceDinnerOptout() {
            $("#chkDinner").on("change", function () {
                recalculateTotalPrice();
            });
        }

        function priceWineReceptionGuests() {
            $("#cmbWineReceptionGuests").on("change", function () {
                recalculateTotalPrice();
            });
        }

        function unsetNifAlert() {
            $("#txtFacturacionNifCliente").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#nifMessage").html("");
                }
            });
        }

        function unsetBillingNameAlert() {
            $("#txtFacturacionNombreCliente").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#billingNameMessage").html("");
                }
            });
        }

        function unsetBillingAddressAlert() {
            $("#txtFacturacionDireccion").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#addressMessage").html("");
                }
            });
        }

        function unsetBillingPostcodeAlert() {
            $("#txtFacturacionCodigoPostal").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#postcodeMessage").html("");
                }
            });
        }

        function unsetBillingCityAlert() {
            $("#txtFacturacionCiudad").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#cityMessage").html("");
                }
            });
        }

        function unsetBillingCountryAlert() {
            $("#txtFacturacionPais").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#billingCountryMessage").html("");
                }
            });
        }

        function unsetPaymentMethodAlert() {
            $(".paymentMethod").on("click", function () {
                if ($(".paymentMethod:checked")) {
                    $("#paymentMethodMessage").html("");
                    $("#containerPaymentMethod").removeClass("errorBackgroundColor error");
                }
            });
        }

        function unsetPrivacyAlert() {
            $("#chkPrivacy").on("click", function () {
                //ON CLICK,
                if (this.checked === true) {
                    $("#privacyMessage").html("");
                    $("#containerPrivacyCheck").removeClass("errorBackgroundColor error");
                } else {
                    $("#privacyMessage").html("To submit the form, you must accept MET's privacy policy");
                    $("#containerPrivacyCheck").addClass("errorBackgroundColor error");
                }
            });
        }

   		function unsetPrivacyAlert2() {
            $("#chkEmailPermission").on("click", function () {
                //ON CLICK,
                if (this.checked === true) {
                    $("#privacyMessage2").html("");
                    $("#containerPrivacyCheck2").removeClass("errorBackgroundColor error");
                } else {
                    $("#privacyMessage2").html("To submit the form, you must allow use of your name and image");
                    $("#containerPrivacyCheck2").addClass("errorBackgroundColor error");
                }
            });
        }
      
        function unsetCaptchaAlert() {
            $("#txtCaptcha").on("keyup", function () {
                if ($(this).val() !== "") {
                    $(this).removeClass("errorBorderColor error");
                    $("#captchaMessage").html("");
                }
            });
        }

        function validateConferenceForm() {
            $("#frmConferenceRegister").on("submit", function (event) {
                event.preventDefault();
                event.stopPropagation();

                let firstName = $("#txtNombre");
                let lastName = $("#txtApellidos");
              	let telNo = $("#txtTelefono");
                let email = $("#txtEmail");
                let emailRegExp = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
                let country = $("#cmbPais");
                let workshops = $(".rdnWorkshop:checked");
                let minisessions = $(".chkMinisession:checked");
                let noWorkshop = $("#chkNotWorkshop");
                let badge = $("#txtaBadge");
                let billingNif = $("#txtFacturacionNifCliente");
                let billingName = $("#txtFacturacionNombreCliente");
                let billingAddress = $("#txtFacturacionDireccion");
                let billingPostcode = $("#txtFacturacionCodigoPostal");
                let billingCity = $("#txtFacturacionCiudad");
                let billingCountry = $("#txtFacturacionPais");
                let paymentMethod = $(".paymentMethod:checked");
                let privacy = $("#chkPrivacy");
              	let privacy2 = $("#chkEmailPermission");
                let captchaText = $("#txtCaptcha");
              	let diet = $("#cmbDiet");
               	let payCode = $("#paymentCode");
              	let totalPrice = parseFloat(document.getElementById("totalPayable").innerHTML);

				if (totalPrice) {
					document.getElementById("transfer").checked = false;
					document.getElementById("paypal").checked = true;
				} else {
					document.getElementById("transfer").checked = true;
					document.getElementById("paypal").checked = false;
				}
              
              	if (payCode.val().toLowerCase().trim() === "{STATIC_DISCOUNT_CONFERENCE}") {                  
					document.getElementById("transfer").checked = true;
					document.getElementById("paypal").checked = false;
				}

                /* if (diet.val() < 1) {
                    diet.addClass("errorBorderColor error");
                    $("#dietMessage").html("Please select dietary preference");
                } */
              	/* if (!/^\d+$/.test(telno) && telno.startsWith("+")) {
				    telNo.addClass("errorBorderColor error");
                    $("#telNoMessage").html("Invalid phone number format");
				} */
                if (firstName.val() === "") {
                    firstName.addClass("errorBorderColor error");
                    $("#firstNameMessage").html("Please enter your first name");
                }
                if (lastName.val() === "") {
                    lastName.addClass("errorBorderColor error");
                    $("#lastNameMessage").html("Please enter your last name(s)");
                }
                if (email.val() === "" || emailRegExp.test(email.val()) === false) {
                    email.addClass("errorBorderColor error");
                    $("#emailMessage").html("Please enter a valid email address");
                }
                if (country.val() < 0) {
                    country.addClass("errorBorderColor error");
                    $("#countryMessage").html("Please select a country");
                }
                /*if (workshops.length < 1 && minisessions.length < 1 && noWorkshop.prop("checked") === false) {
                    $("#workshopsMessage").html("Registration for one workshop or two minisessions is included in the conference fee. If you do not wish to register for any of the workshops, please check the appropriate box before submitting the form");
                    $("#containerWorkshop").addClass("errorBackgroundColor error");
                }*/
                if (minisessions.length > 2) {
                    $(".hiddenDate").each(function () {
                        let miniDate = this.name.split("_")[1];
                        if ($(".minisessionChoice_" + miniDate + ":checked").length > 2) {
                            $("#maxMinisessionsMessage").html("Please select no more than two minisessions on any one day");
                            $("#containerWorkshop").addClass("errorBackgroundColor error");
                        }
                    });
                }
                if (billingNif.val() === "") {
                    billingNif.addClass("errorBorderColor error");
                    $("#nifMessage").html("Please enter your tax ID or VAT number");
                }
                if (billingName.val() === "") {
                    billingName.addClass("errorBorderColor error");
                    $("#billingNameMessage").html("Please enter your name for billing purposes");
                }
                if (billingAddress.val() === "") {
                    billingAddress.addClass("errorBorderColor error");
                    $("#addressMessage").html("Please enter your address");
                }
                if (billingPostcode.val() === "") {
                    billingPostcode.addClass("errorBorderColor error");
                    $("#postcodeMessage").html("Please enter your postal code");
                }
                if (billingCity.val() === "") {
                    billingCity.addClass("errorBorderColor error");
                    $("#cityMessage").html("Please enter your town or city");
                }
                if (billingCountry.val() === "") {
                    billingCountry.addClass("errorBorderColor error");
                    $("#billingCountryMessage").html("Please enter your country");
                } 
                /* if (badge.val() === "") {
                    badge.addClass("errorBorderColor error");
                    $("#badgeMessage").html("Please enter your badge information");
                } 
                if (paymentMethod.length < 1) {
                    $("#paymentMethodMessage").html("Please select a payment method");
                    $("#containerPaymentMethod").addClass("errorBackgroundColor error");
                } */
                if (privacy.prop("checked") === false) {
                    $("#privacyMessage").html("To submit the form, you must accept MET's privacy policy");
                    $("#containerPrivacyCheck").addClass("errorBackgroundColor error");
                }
              	if (privacy2.prop("checked") === false) {
                    $("#privacyMessage2").html("To submit the form, you must allow use of your name and/or image");
                    $("#containerPrivacyCheck2").addClass("errorBackgroundColor error");
                }
                if (captchaText.val() === "") {
                    captchaText.addClass("errorBorderColor error");
                    $("#captchaMessage").html("Please enter the characters from the image");
                }
/*				if (diet.val() < 1) {
                    diet.addClass("errorBorderColor error");
                    $("#dietMessage").html("Pleae select your dietary requirements");
                }
                //If any fields are invalid

                /*
                if (diet.val() < 1 || firstName.val() === "" || lastName.val() === "" || (email.val() === "" || emailRegExp.test(email.val()) === false) || country.val() < 0 || (workshops.length === 1 && minisessions.length > 2) || (workshops.length === 2 && minisessions.length > 0) || billingNif.val() === "" || billingName.val() === "" || billingAddress.val() === "" || billingPostcode.val() === "" || billingCity.val() === "" || billingCountry.val() === "" || paymentMethod.length < 1 || privacy.prop("checked") === false || captchaText.val() === "") {
*/
/*
                    if ((!/^\d+$/.test(telno) && telno.startsWith("+")) || firstName.val() === "" || lastName.val() === "" || (email.val() === "" || emailRegExp.test(email.val()) === false) || country.val() < 0 || (workshops.length === 1 && minisessions.length > 2) || (workshops.length === 2 && minisessions.length > 0) || billingNif.val() === "" || billingName.val() === "" || billingAddress.val() === "" || billingPostcode.val() === "" || billingCity.val() === "" || billingCountry.val() === "" || privacy.prop("checked") === false || privacy2.prop("checked") === false || captchaText.val() === "") {
*/

                if (firstName.val() === "" || lastName.val() === "" || (email.val() === "" || emailRegExp.test(email.val()) === false) || country.val() < 0 || billingNif.val() === "" || billingName.val() === "" || billingAddress.val() === "" || billingPostcode.val() === "" || billingCity.val() === "" || billingCountry.val() === "" || privacy.prop("checked") === false || privacy2.prop("checked") === false || captchaText.val() === "") {
              //Scroll to first invalid input or checkbox, with animation
                    let invalidInput = $(".error");
                    if (invalidInput.length > 0) {
                        $("html, body").animate({
                            scrollTop: invalidInput.first().offset().top - 20
                        }, 800);
                    }
                } else {

                    //Block user interface (blockUI,js) and display "Sendingâ€¦" message
                    //mensajeCargando("{STATIC_GLOBAL_SENDING}...");
                    document.getElementById('cmbInvitados').disabled=false;
                    //Call script (save_inscription_conference) to generate conference registration
                    generateConferenceRegistration();
                }
            });
        }

        function recalculateTotalPrice() {
            let price = 0;
            let workshopPrice = parseFloat(document.getElementById("hdnPriceExtraWorkshop").value);
            let minisessionPrice = parseFloat(document.getElementById("hdnPriceExtraMinisession").value);
            let dinnerGuestPrice = parseFloat(document.getElementById("hdnPriceDinnerGuest").value);
            let dinnerOptoutDiscount = parseFloat(document.getElementById("hdnPriceDinnerOptoutDiscount").value);
            let wineReceptionGuestPrice = parseFloat(document.getElementById("hdnPriceWineReceptionGuest").value);
            // let speaker = document.getElementById("chkSpeaker").checked;
			let speaker = document.getElementById("cmbSpeaker").value;
            let earlyBird = document.getElementById("hdnEarlyBird");
            let loggedIn = document.getElementById("hdnIdLogin");
            let sisterAssociation = document.getElementById("cmbAsociacionHermana").value;


            // if (speaker === false) {
          	if (speaker <= "1") {
//          if (speaker === "-1") {
                if (!earlyBird) {
                    if (!loggedIn) {
                        if (sisterAssociation === "-1") {
                            price = parseFloat(document.getElementById("hdnPriceNonMemberLate").value);
                        } else {
                            price = parseFloat(document.getElementById("hdnPriceSisterLate").value);
                        }
                    } else {
                        price = parseFloat(document.getElementById("hdnPriceMemberLate").value);
                    }
                } else {
                    if (!loggedIn) {
                        if (sisterAssociation === "-1") {
                            price = parseFloat(document.getElementById("hdnPriceNonMemberEarly").value);
                        } else {
                            price = parseFloat(document.getElementById("hdnPriceSisterEarly").value);
                        }
                    } else {
                        price = parseFloat(document.getElementById("hdnPriceMemberEarly").value);
                    }
                }
            } else {
                if (!loggedIn) {
                    if (sisterAssociation === "-1") {
                        price = parseFloat(document.getElementById("hdnPriceNonMemberSpeaker").value);
                    } else {
                        price = parseFloat(document.getElementById("hdnPriceSisterSpeaker").value);
                    }
                } else {
                    price = parseFloat(document.getElementById("hdnPriceMemberSpeaker").value);
                }
            }

            //Workshops and minisessions
            let numberWorkshopsSelected = $(".rdnWorkshop:checked").length;
            let numberMinisessionsSelected = $(".chkMinisession:checked").length;

            /*if (numberWorkshopsSelected > 1) {
                price += workshopPrice * numberWorkshopsSelected;
            } else if (numberWorkshopsSelected === 1) {
                if (numberMinisessionsSelected > 0) {
                    price += workshopPrice + (minisessionPrice * numberMinisessionsSelected)
                } else {
                    price += workshopPrice;
                }
            } else if (numberMinisessionsSelected > 0) {
                price += minisessionPrice * numberMinisessionsSelected;
            }*/

            if (numberWorkshopsSelected > 0) {
                price += workshopPrice * numberWorkshopsSelected;
            }
            if (numberMinisessionsSelected > 0) {
                price += minisessionPrice * numberMinisessionsSelected;
            }

            //Dinner guests
            let dinnerGuests = $("#cmbInvitados").val();
            if (dinnerGuests > "0") {
                price += (dinnerGuestPrice * dinnerGuests);
            }

            //Dinner optout
            if (document.getElementById("chkDinner").checked) {
                price -= dinnerOptoutDiscount;
            }//end if

            //Wine reception guests
            let wineReceptionGuests = $("#cmbWineReceptionGuests").val();
            if (wineReceptionGuests > "0") {
                price += (wineReceptionGuestPrice * wineReceptionGuests);
            }

            document.getElementById("debug").innerHTML = price;

            document.getElementById("totalPayable").innerHTML = price;
            /*document.getElementById("finalPrice").value=price;*/
        }//end if

        /*
        * Serialises conference form data and posts it to save_inscription_conference
        */
      function generateConferenceRegistrationtest() {
        alert("About to process.");
      }
        function generateConferenceRegistration() {
            let form = $("#frmConferenceRegister");
            let signupResult;
            $.ajax({
                type: "POST",
                url: "ajax/save_inscription_conference",
                data: form.serialize(),
                success: function (data) {
                    //data is process_form.html, which consists of two hidden fields (hdnTipoResultado and item)
                    //these two fields are stored in the conference form in a div with id=resultadoInscripcion
                    document.getElementById("resultadoInscripcion").innerHTML = data;
                    //the value of hdnTipoResultado (1=transfer, 2=Stripe, or error message) is stored in a variable
                    signupResult = document.getElementById("hdnTipoResultado");
                    //alert('Error message = ' + signupResult.value);
                    if (signupResult.value === "1") {
                        window.location = "inscripcion_finalizada?modo=1&tipo=1";

                    } else if (signupResult.value === "2") {
                        let item = document.getElementById("item").value;
						window.location = "/proceed?it=" + item + "&test=" + {STATIC_CONFERENCE_TEST};

                    //If signupResult is a captcha error message, display message in conference form
                    //and unblock the screen
                    } else if (signupResult.value === "{STATIC_CAPTCHA_ENTER_LETTERS_NUMBERS_IMAGE}") {
                        document.getElementById("captchaMessage").innerHTML = signupResult.value;
                        $.unblockUI();

                    //If signupResult is a form field error message, display message in conference form
                    //and unblock the screen
                    } else {
                        /*let captchaMessage = document.getElementById("captchaMessage");
                        captchaMessage.innerHTML = signupResult.value;*/
                        document.getElementById("msgAlert").innerHTML = signupResult.value;
                        document.getElementById("msgAlert").setAttribute("class", "msgKO");
                        document.getElementById("msgAlert").style.display = "block";
                        moverWeb();
                        $.unblockUI();
                    }
                }
            });
        }

        //ON PAGE LOAD, call functions
        $(document).ready(function () {
            /*finalPrice();*/
            reloadCaptchaConference();
            unsetFirstNameAlert();
            unsetLastNameAlert();
            unsetEmailAlert();
            /* unsetTelNoAlert(); */
            unsetCountryAlert();
            /*unsetDietAlert();*/
            updatePriceSister();
            updatePriceSpeaker();
            deselectRadioButtons();
            disableMinisessions();
            unsetWorkshopsAlert();
            /*setThreeMinisessionsAlert();*/
            /*disableAllWorkshops();*/
            unsetBadgeAlert();
            priceDinnerGuests();
            priceDinnerOptout();
            priceWineReceptionGuests();
            unsetNifAlert();
            unsetBillingNameAlert();
            unsetBillingAddressAlert();
            unsetBillingPostcodeAlert();
            unsetBillingCityAlert();
            unsetBillingCountryAlert();
            unsetPaymentMethodAlert();
            unsetPrivacyAlert();
            unsetPrivacyAlert2();
            unsetCaptchaAlert();
            supports_input_placeholder();
            validateConferenceForm();
        });
        <!-- END: validate_conference_registration_form -->

        <!-- BEGIN: validate_edit_profile -->
        //ON PAGE LOAD, validate password matching continuously on key up
        function checkPwds() {
            let newP = $("#txtNewPassword");
            let confirmP = $("#txtConfirmNewPassword");
            let pwdMessage = $("#pwdMessage");
            if (newP.val() !== "" && confirmP.val() !== "") {
                if (newP.val() !== confirmP.val()) {
                    pwdMessage.css("color", "#dc3545");
                    pwdMessage.html("Passwords must match");
                    $("#btnSendForm").prop("disabled", true);
                } else {
                    pwdMessage.css("color", "#28a745");
                    pwdMessage.html("Passwords match!");
                    $("#btnSendForm").prop("disabled", false);
                }
            }
        }

        //ON PAGE LOAD, add multiselect to inputs with class "multiSelect"
        //NB Script doesn't work when Chrome Developer is open!!!
        function addMultiselect() {
            $(".multiSelect").chosen();
        }

        //ON CLICK, clear alert on country dropdown if country selected
        function clearCountryWarning() {
            $("#cmbPais").on("click", function () {
                if ($(this).val() > 0) {
                    $(this).css("border-color", "");
                    $("#chkCountryMessage").html("");
                }
            });
        }

        //ON CLICK, clear alert on professional activities if one selected
        function clearProfActsAlert() {
            $(".professionalActivity").each(function () {
                $(this).on("click", function () {
                    if (this.checked) {
                        $("#profActsMessage").html("");
                        $("#containerProfActs").removeClass("errorBackgroundColor error");
                    }
                });
            });
        }

        //ON SUBMIT, validate required fields (HTML5 and custom)
        function validateEditProfile() {
            $("#frmMembership").on("submit", function (event) {
                let country = $("#cmbPais");
                let profActs = $(".professionalActivity:checked");
                if (this.checkValidity() === false) {
                    //A required field is empty, prevent submission
                    event.preventDefault();
                    event.stopPropagation();
                    //Scroll to error
                    $("html, body").animate({
                        scrollTop: $(".form-control:invalid").first().offset().top - 20
                    }, 800);
                } else if ((country.val() < 0) || (profActs.length < 1)) {
                    event.preventDefault();
                    event.stopPropagation();
                    if (country.val() < 0) {
                        //No country of residence selected
                        //document.getElementById("cmbPais").classList.add("errorBorderColor");
                        country.css("border-color", "#dc3545");
                        $("#chkCountryMessage").html("Please select a country");
                        $("html, body").animate({
                            scrollTop: country.offset().top - 20
                        }, 800);
                    }
                    if (profActs.length < 1) {
                        let profContainer = $("#containerProfActs");
                        //No professional activity selected
                        $("#profActsMessage").html("Please select at least one activity");
                        profContainer.addClass("errorBackgroundColor error");
                        $("html, body").animate({
                            scrollTop: profContainer.offset().top - 20
                        }, 800);
                    }
                } else {
                    let cadenaActividades = "";
                    profActs.each(function (index, valor) {
                        cadenaActividades += valor.value + ",";
                    });
                    cadenaActividades = cadenaActividades.substring(0, cadenaActividades.length - 1);
                    document.frmMembership.hdnIdActividadProfesional.value = cadenaActividades;

                    let cadenaSituacionesLaborales = "";
                    $(".workSituation:checked").each(function (index, valor) {
                        cadenaSituacionesLaborales += valor.value + ",";
                    });
                    cadenaSituacionesLaborales = cadenaSituacionesLaborales.substring(0, cadenaSituacionesLaborales.length - 1);
                    document.frmMembership.hdnIdSituacionLaboral.value = cadenaSituacionesLaborales;

                    //Run function to block user interface via blockUI.js and display Sendingâ€¦ message
                    mensajeCargando("{STATIC_GLOBAL_SENDING}...");
                    document.frmMembership.submit();
                }
            });
        }

        //ON PAGE LOAD, call functions
        $(document).ready(function () {
            checkPwds();
            clearCountryWarning();
            clearProfActsAlert();
            addMultiselect();
            validateEditProfile();
            supports_input_placeholder();
        });
        <!-- END: validate_edit_profile -->
          
        <!-- BEGIN: validate_confedit_form -->
          //ON PAGE LOAD, add multiselect to inputs with class "multiSelect"
			//NB Script doesn't work when Chrome Developer is open!!!
			function addMultiselect() {
			$(".multiSelect").chosen();
			}
      
      //ON PAGE LOAD, call functions
			$(document).ready(function () {
			addMultiselect();
			});
          
        <!-- END: validate_confedit_form -->

        <!-- BEGIN: validar_submit_event -->
        function validarFormularioSubmitEvent() {
            let btn = document.getElementById("btnSendForm");
            let msgContenido = document.getElementById("msgAlert");
            let blError = true;
            let txtError = "";

            btn.disabled = true;
            limpiarErrores();

            if (trim(document.frmSubmitEvent.txtTitulo.value) === "" || document.frmSubmitEvent.txtTitulo.value === "{STATIC_FORM_MEMBERSHIP_TITLE}") {
                blError = false;
                destacarError(document.frmSubmitEvent.txtTitulo);
                txtError = "{STATIC_FORM_EVENT_SUBMIT_TITLE_EMPTY}";
            } else if (document.frmSubmitEvent.cmbTematica.value < 0) {
                blError = false;
                destacarError(document.frmSubmitEvent.cmbTematica);
                txtError = "{STATIC_FORM_EVENT_SUBMIT_THEME}";
            } else if (trim(document.frmSubmitEvent.txtResumen.value) === "" || document.frmSubmitEvent.txtResumen.value === "{STATIC_FORM_EVENT_SUBMIT_SUMMARY}") {
                blError = false;
                destacarError(document.frmSubmitEvent.txtResumen);
                txtError = "{STATIC_FORM_EVENT_SUBMIT_SUMMARY_ERROR}";
            }

            if (blError) {
                document.frmSubmitEvent.submit();
            } else {
                msgContenido.innerHTML = txtError;
                msgContenido.setAttribute("class", "msgKO alert alert-danger");
                msgContenido.style.display = "block";
            }

            btn.disabled = false;
        }

        <!-- END: validar_submit_event -->

        <!-- BEGIN: validar_submit_job -->
        function validarFormularioSubmitJob() {
            let btn = document.getElementById("btnSendForm");
            let msgContenido = document.getElementById("msgAlert");
            let blError = true;
            let txtError = "";

            btn.disabled = true;
            limpiarErrores();

            if (trim(document.frmSubmitJob.txtTitulo.value) === "" || document.frmSubmitJob.txtTitulo.value === "{STATIC_FORM_MEMBERSHIP_TITLE}") {
                blError = false;
                destacarError(document.frmSubmitJob.txtTitulo);
                txtError = "{STATIC_FORM_EVENT_SUBMIT_TITLE_EMPTY}";
            } else if (trim(document.frmSubmitJob.txtEmail.value) !== "" && document.frmSubmitJob.txtEmail.value !== "{STATIC_FORM_MEMBERSHIP_EMAIL}" && !validarEmail(document.frmSubmitJob.txtEmail.value)) {
                blError = false;
                destacarError(document.frmSubmitJob.txtEmail);
                txtError = "{STATIC_FORM_JOB_SUBMIT_MAIL_ERROR}";
            } else if (trim(document.frmSubmitJob.txtResumen.value) === "" || document.frmSubmitJob.txtResumen.value === "{STATIC_FORM_EVENT_SUBMIT_SUMMARY}") {
                blError = false;
                destacarError(document.frmSubmitJob.txtResumen);
                txtError = "{STATIC_FORM_EVENT_SUBMIT_SUMMARY_ERROR}";
            }

            if (blError) {
                document.frmSubmitJob.submit();
            } else {
                msgContenido.innerHTML = txtError;
                msgContenido.setAttribute("class", "msgKO alert alert-danger");
                msgContenido.style.display = "block";
            }

            btn.disabled = false;
        }

        <!-- END: validar_submit_job -->

        <!-- BEGIN: validar_formulario_contacto -->
        //ON CLICK, refresh captcha image when refresh icon is clicked
        function refreshCaptchaContact() {
            $("#reloadCaptcha").on("click", function () {
                document.getElementById("imageCaptcha").src = "classes/securimage/securimage_show?sid=" + Math.random();
                document.getElementById("imageCaptcha").value = "";
            });
        }

        //ON SUBMIT, validate required fields
        function validateContactForm() {
            $("#formContact").on("submit", function (event) {
                //Don't submit the form at all
                event.preventDefault();
                event.stopPropagation();
                //Check validity on client side and return to form if invalid
                if (this.checkValidity() === false) {
                    //if valid on client side, submit to server (AJAX request)
                } else {
                    mensajeCargando("{STATIC_GLOBAL_SENDING}...");
                    let form = $("#formContact");
                    let result;
                    let message;
                    $.ajax({
                        type: "POST",
                        url: "ajax/send_mail_contact",
                        data: form.serialize(),
                        success: function (data) {
                            //Possible results are 1=OK, 2=captcha invalid or 3=mail not sent
                            result = data;
                            //If OK on server side, redirect to contact page with success message (code=1)
                            if (result === "1") {
                                window.location = "contact?menu=" + document.formContact.hdnIdMenu.value + "&code=1";
                                //If error, display error message in contact form
                            } else if (result === "2") {
                                message = document.getElementById("msgAlert");
                                message.innerHTML = "{STATIC_CAPTCHA_ENTER_LETTERS_NUMBERS_IMAGE}";
                                message.setAttribute("class", "msgKOContact");
                                message.style.display = "block";
                            } else {
                                message = document.getElementById("msgAlert");
                                message.innerHTML = "{STATIC_CONTACT_NO_SENDED}";
                                message.setAttribute("class", "msgKOContact");
                                message.style.display = "block";
                            }
                            $.unblockUI();
                        }
                    });
                }
                this.classList.add("was-validated");
            });
        }

        //ON PAGE LOAD, add event listeners
        $(document).ready(function () {
            refreshCaptchaContact();
            validateContactForm();
        });

        <!-- END: validar_formulario_contacto -->

        <!-- BEGIN: validate_expense_form -->
        function validateExpenseForm() {
            $("#frmExpense").on("submit", function (event) {
                if (this.checkValidity() === false) {
                    $(".form-control:invalid").first().get(0).scrollIntoView();
                    event.preventDefault();
                    event.stopPropagation();
                }
                this.classList.add("was-validated");
            });
        }

        //ON PAGE LOAD, call functions
        $(document).ready(function () {
            $(".datepicker").attr("required", "").addClass("required");
            validateExpenseForm();
        });
        <!-- END: validate_expense_form -->
    </script>

    <!-- Cookie consent -->
    <link rel="stylesheet" type="text/css"
          href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css"/>
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
        window.addEventListener("load", function () {
            window.cookieconsent.initialise({
                "palette": {
                    "popup": {
                        "background": "#eb6c44",
                        "text": "#ffffff"
                    },
                    "button": {
                        "background": "#f5d948"
                    }
                },
                "theme": "classic",
                "position": "bottom-right",
                "content": {
                    "message": "This website uses cookies:<br>- to monitor website traffic<br>- to keep you logged in while you are browsing the website<br>",
                    "dismiss": "I accept",
                    "href": "https://www.metmeetings.org/en/met-privacy-policy:30"
                }
            })
        });
    </script>

</head>

<!-- A CSS rule hides the image on smaller screens. The RANDOM_IMAGE_URL is set in load_structure.inc  -->
<body style="background: #FFFFFF url('{RANDOM_IMAGE_URL}') no-repeat scroll 50% 0" ;>
<div class="container-fluid wrapper">
    <div class="row loginLink">
        <div class="col-12 d-md-none w-100 bg-dark py-2">
            <a href="#loginForm" class="loginLink" style="margin-left:20px;color:white;font-size:100%;">{PANEL_LOGIN_USERNAME} </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="profile_edit?menu=42" style="color:white;font-size:100%;">{EDIT_MY_PROFILE}</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="logout" style="color:white;font-size:100%;">{LOGOUT}</a>
        </div>
    </div>

    <div class="d-none d-md-block">
        <a href="https://www.metmeetings.org"><img src="images/pictures/logos/logo.met.png" width="244" height="125"
                                                   alt="MET logo"
                                                   style="margin-top: 3em;"></a>
   		<a href="https://www.metmeetings.org/en/our-history:1652"><img class="float-right" src="images/pictures/logos/Banner_20_years.png" width="368" height="125"
                                                   alt="20 years of MET meetings"
                                                   style="margin-top: 3em;"></a>
    </div>

    <div class="row topnav">
        <div class="col-12">
            <nav class="navbar navbar-expand-md navbar-dark navbar-custom">
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <a class="navbar-brand d-md-none" href="{CURRENT_DOMAIN}" style="padding-left: 0;">
                    <!-- <img src="images/pictures/logos/MET_color_transparent_120x61.png" width="120" height="61" alt=""> -->
					<img src="images/pictures/logos/logo_mobile_celebrating_20.png" width="260" height="71" alt="">
                </a>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav">
                        <!-- BEGIN: item_menu_superior -->
                        <li class="nav-item dropdown {ITEM_MENU_SUPERIOR_PRIVATE}">
                            <a class="nav-link dropdown-toggle" id="{ITEM_MENU_SUPERIOR_ID}" {TEST_ITEM_TEXT} 
                               href="{ITEM_MENU_SUPERIOR_URL}" role="button" aria-haspopup="true" aria-expanded="false">{ITEM_MENU_SUPERIOR_TITULO}</a>
                            <!-- BEGIN: menu_superior_desplegable -->
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <!-- BEGIN: item_menu_superior_desplegable -->
                                <a class="dropdown-item {ITEM_MENU_SUPERIOR_DESPLEGABLE_PRIVATE}"
                                   href="{ITEM_MENU_SUPERIOR_DESPLEGABLE_URL}">{ITEM_MENU_SUPERIOR_DESPLEGABLE_TITULO}</a>
                                <!-- END: item_menu_superior_desplegable -->
                            </div>
                            <!-- END: menu_superior_desplegable -->
                        </li>
                        <!-- END: item_menu_superior -->
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div class="row page-area">
        <div class="col-12 col-md-9">
            <!-- BEGIN: control_superior -->
            {BREADCRUMB}
            {SLIDER}
            <!-- END: control_superior -->
            <div class="row content-area">
                <!-- BEGIN: menu_left -->
                <div class="col-12 col-sm-3 lefthand-menu order-1 order-sm-1">
                    {MENU_LEFT}
                </div>
                <div class="col-12 col-sm-9 main-content order-2 order-sm-2">
                    {CONTENIDO}
                </div>
                <!-- END: menu_left -->
                <!-- BEGIN: full_width_content -->
                <div class="col-12 main-content">
                    {CONTENIDO}
                </div>
                <!-- END: full_width_content -->
            </div>
        </div>
        <div class="col-12 col-md-3 sidepanel">
            <div id="loginPanel">
                <a name="loginForm"></a>
                <div id="loginTitle">{STATIC_MEMBERS}</div>
                <!-- BEGIN: panel_login -->
                <form class="needs-validation" novalidate id="frmLogin" name="frmLogin" method="post" autocomplete="off" action="authentication">
                    <input type="hidden" name="hdnUrlActual" id="hdnUrlActual" value="{URL_ACTUAL}">
                    <label class="sr-only" for="txtUsername">Username</label>
                    <input class="form-control" type="text" name="txtUsername" id="txtUsername"
                           placeholder="{STATIC_MAIL}" autocomplete="username"
                           required>
                    <div class="invalid-feedback">
                        Please enter your email
                    </div>
                    <label class="sr-only" for="txtPassword">Password</label>
                    <input class="form-control" type="password" name="txtPassword" id="txtPassword"
                           placeholder="{STATIC_PASSWORD}" autocomplete="current-password"
                           onkeypress="ejecutarIntroLogin(event);" required>
                    <div class="invalid-feedback">
                        Please enter your password
                    </div>
                    <p id="msgLoginError" style="{LOGIN_DISPLAY}">{LOGIN_ERROR_MENSAJE}</p>
                    <button class="btn btn-primary" type="submit" name="btnLogin" id="btnLogin">
                        {STATIC_SIGN_IN}
                    </button>
                </form>

                <p class="form-text">{STATIC_I_FORGOT_MY_USER}
                    <a href="{URL_REMEMBER_PASSWORD}">{STATIC_PASSWORD}</a></p>
                <!-- END: panel_login -->
                <!-- BEGIN: datos_usuario -->
                <div id="infoUserData">
                    {PANEL_LOGIN_USERNAME}<br />
                    {MEMBERSHIP_NUMBER_TEXT} {MEMBERSHIP_NUMBER_NUMBER}
                </div>
                <!-- BEGIN: bloque_miembro_hasta -->
                {STATIC_MEMBER_UNTIL} <strong>{MIEMBRO_FECHA_HASTA}</strong><br>
                <!-- BEGIN: bloque_renew -->
                <a href="{URL_PROFILE_RENEW_MEMBERSHIP}">{STATIC_PROFILE_RENEW_MEMBERSHIP}</a>
                <!-- END: bloque_renew -->
                <span style="color:#8B1513">{EXPIRED_ACCOUNT}</span>
                <!-- END: bloque_miembro_hasta -->
                <!-- BEGIN: bloque_perfil -->
                <a href="profile_edit?menu=42">{STATIC_EDIT_PROFILE}</a>
                <!-- END: bloque_perfil -->
                <!-- BEGIN: bloque_pago_pendiente -->
                <p><strong>{STATIC_PAYMENT_PENDING}</strong></p>
                <!-- END: bloque_pago_pendiente -->
                <p><a href="logout">{STATIC_DISCONNECT}</a></p>
                <!-- END: datos_usuario -->
                <!-- BEGIN: search box  -->
                <script async src="https://cse.google.com/cse.js?cx=c765335836c39e727"></script>
                <form><fieldset style="border: 1px solid lightgray;padding: .3em .3em .8em;border-radius: .4em;">
                <legend style="font-size: 100%;font-weight:bold;color:#377978;text-transform: uppercase;">&nbsp;{STATIC_SEARCH_WIDGET}</legend>				
				<div class="gcse-search">&nbsp;</div>
                  </fieldset></form>
				<!-- END: search box -->
            </div>

            <!-- BEGIN: item_boton_acceso -->
            <!-- BEGIN: si_url -->
            <a href="{ITEM_BOTON_ACCESO_URL}" target="{ITEM_BOTON_ACCESO_TARGET}">
                <img src="{ITEM_BOTON_ACCESO_IMAGEN}" class="sideBanner">
            </a>
            <!-- END: si_url -->
            <!-- BEGIN: no_url -->
            <img src="{ITEM_BOTON_ACCESO_IMAGEN}" class="sideBanner">
            <!-- END: no_url -->
            <!-- END: item_boton_acceso -->
            <div id="socialNetwork">
                <h6>{STATIC_FOLLOW_US}:</h6>
                <a href="https://www.instagram.com/metmeetings/" target="_blank"><img src="images/pictures/social/instagram_32.png"></a>              
                <a href="https://www.linkedin.com/company/mediterranean-editors-translators" target="_blank"><img src="images/pictures/social/rs.linkedin_32.png"></a>
<!--                <a href="https://twitter.com/METMeetings" target="_blank"><img src="images/pictures/social/rs.twitter_32.png"></a> -->
                <a href="https://www.facebook.com/Metmeetings/" target="_blank"><img src="images/pictures/social/rs.facebook_32.png"></a>
                <div class="clear"></div>
            </div>
        </div>
    </div>

    <hr>

    <div class="row footer">
        <div class="mx-auto">

            <div class="copyright">
                &copy; {STATIC_MEDITERRANEAN_EDITORS_AND_TRANSLATORS}
            </div>

            <!-- BEGIN: item_menu_inferior -->
            <div class="footerItem">
                <a href="{ITEM_MENU_INFERIOR_URL}">{ITEM_MENU_INFERIOR_TITULO}</a>
            </div>
            <!-- END: item_menu_inferior -->

        </div>
    </div>
</div>

</body>
</html>
<!-- END: contenido_principal -->