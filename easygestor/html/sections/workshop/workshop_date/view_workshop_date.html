<!-- BEGIN: contenido_principal -->
<script type="text/javascript">
	function buscarInscritos(excel){
		if(document.frmListaTaller.cmbFecha.value==0){
			loadEasyNotify("{STATIC_VIEW_WORKSHOP_DATE_WORKSHOP_DATE_SEARCH_ERROR}",1);
			
		}else{
			document.frmListaTaller.excel.value=excel;
			document.frmListaTaller.submit();
		}
	}
	
	function exportaExcelMiembros(invocador){
		var valor=invocador.value;
		switch(valor){
			case "1":
				window.location="export_excel.php?section=workshop_date";
				break;
		}
	}
  
  function openPageWithText() {
  const select = document.getElementById("cmbFecha");
  const selectedText = select.options[select.selectedIndex].text;

  // Create the target URL
  const baseUrl = "https://www.metmeetings.org/easygestor/main_app.php?section=workshop&action=badges";
  const url = new URL(baseUrl);
  url.searchParams.set("ws-date", selectedText);

  // Open in a new tab/window
  window.open(url.toString(), "_blank");
}
  
</script>
<div id="textExplication">
	<h2>{STATIC_GLOBAL_WELCOME_EASYGESTOR}</h2>
</div>
<ul id="controlModButtons">
	<!-- BEGIN: boton_cancel_inscripcion -->
	<li><a href="javascript:cancelarElemento('{STATIC_CANCEL_WORKSHOP_DATE_TITLE}','{STATIC_CANCEL_WORKSHOP_DATE}','{STATIC_GLOBAL_BUTTON_YES}','{STATIC_GLOBAL_BUTTON_NO}','frmListaTaller','tblListItem')"" class="OptionDelete cufon">{STATIC_GLOBAL_BUTTON_CANCEL} </a><img src="images/pictures/icons/news.icon.png" /></li>
	<!-- END: boton_cancel_inscripcion -->
    <li><a href="main_app.php?section=workshop&action=generate&id_taller={ID_TALLER}&fecha_taller={FECHA_TALLER}" class="OptionPDF cufon">Generate certs</a><img src="images/pictures/icons/news.icon.png" /></li>
    <li><a href="main_app.php?section=workshop&action=send&id_taller={ID_TALLER}&fecha_taller={FECHA_TALLER}" class="OptionSend cufon">Send all certs</a><img src="images/pictures/icons/news.icon.png" /></li>
    <li><a href="#" onclick="openPageWithText()" class="OptionPDF cufon">Badges</a><img src="images/pictures/icons/news.icon.png" /></li>
	<li><a href="main_app.php?section=workshop&action=edit&id_taller={ID_TALLER}" class="OptionEdit cufon">{STATIC_GLOBAL_BUTTON_RETURN} </a><img src="images/pictures/icons/news.icon.png" /></li>
</ul>
<div class="boxFormEasyNotify"><div id="containerEasyNotify" class="layoutFormEasyNotify"></div></div>
<form name="frmListaTaller" id="frmListaTaller">
	<input type="hidden" name="section" id="section" value="workshop_date">
	<input type="hidden" name="action" id="action" value="view">
	<input type="hidden" name="pagina" id="pagina" value="{PAGINA_ACTUAL}">
	<input type="hidden" name="hdnOrden" id="hdnOrden" value="{ORDEN_SELECCIONADO}">
	<input type="hidden" name="hdnRegistros" id="hdnRegistros" value="{NUMERO_REGISTROS_SELECCIONADOS}">
	<input type="hidden" name="id_taller" value="{ID_TALLER}">
	<input type="hidden" name="id_destino" value="{ID_DESTINO}">
	<input type="hidden" name="hdnId" id="hdnId">
	<input type="hidden" name="excel" id="excel">
	<div class="headerSectionForm">
		<div class="leftBorder"></div>
		<div class="titleSectionForm">{STATIC_GLOBAL_BUTTON_SEARCH}</div>
		<div class="rightBorder"></div>
	</div>
		<div class="containerSection" id="generalContent">
			<div class="contentSectionForm">
				<table border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td>{STATIC_VIEW_WORKSHOP_DATE_WORKSHOP_DATE_SEARCH}</td>
						<td>{COMBO_FECHA}</td>
      					<td>Number</td>
						<td>{WORKSHOP_NUMBER}</td>
					</tr>
					<tr>
						<td>{STATIC_VIEW_WORKSHOP_DATE_PAID_SEARCH}</td>
						<td>{COMBO_PAGADO}</td>
						<td>{STATIC_VIEW_WORKSHOP_DATE_ASSISTED_SEARCH}</td>
						<td>{COMBO_ASISTIDO}</td>
					</tr>
					<tr>
						<td>{STATIC_VIEW_WORKSHOP_DATE_EMAIL_ADDRESS_SEARCH}</td>
						<td><input type="text" name="txtEmail" value="{VIEW_WORKSHOP_DATE_EMAIL_ADDRESS_SEARCH_VALUE}"></td>
						<td style="padding-left:10px;">{STATIC_VIEW_WORKSHOP_DATE_NAME_SEARCH}</td>
						<td><input type="text" name="txtNombre" value="{VIEW_WORKSHOP_DATE_NAME_SEARCH_VALUE}"></td>
					</tr>
					<tr>
						<td>{STATIC_VIEW_WORKSHOP_DATE_INSCRIPTION_NUMBER_SEARCH}</td>
						<td><input type="text" name="txtNumeroInscripcion" value="{VIEW_WORKSHOP_DATE_INSCRIPTION_NUMBER_SEARCH_VALUE}"></td>
						<td style="padding-left:10px;">{STATIC_VIEW_WORKSHOP_DATE_USER_TYPE_SEARCH}</td>
						<td>{COMBO_USER_TYPE}</td>
					</tr>
					<tr>
						<td colspan="4" style="padding-top:10px;text-align:right;">
							<button type="button" onclick="buscarInscritos(0);" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover"><span class="ui-button-text">{STATIC_GLOBAL_BUTTON_SEARCH}</span></button>
						</td>
					</tr>
					<tr>
						<td colspan="4" style="vertical-align:bottom;">
							<fieldset>
								<legend>{STATIC_GLOBAL_EXPORT_EXCEL}</legend>
								<button type="button" onclick="buscarInscritos(1)" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover"><span class="ui-button-text">{STATIC_GLOBAL_EXPORT_EXCEL}</span></button>
							</fieldset>
						</td>
					</tr>
				</table>
			</div>
		</div>	
</form>
<div class="catbox">
	<div class="leftBorder"></div>
	{PAGINADOR_INFORMACION}
	<div class="left">
	<span class="Nbuoyancy">{STATIC_FILTER_SHOW}:</span>
	{COMBO_NUMERO_REGISTROS}
	</div>
	<div class="left">
	<span class="Nbuoyancy">{STATIC_FILTER_ORDER_BY_FIELD}:</span>
	{COMBO_ORDEN}
	</div>
   	{PAGINADOR_NAVEGACION_SUPERIOR}
   	{PAGINADOR}
</div>
<div class="streamsbox" style="display:block; height:auto; width:637px;">
	<div class="resultscontainer">
		<div id="permisoEscrituraFraseTitulo" style="display:none;">{STATIC_VIEW_WORKSHOP_NO_ALLOW_TITLE}</div>
		<div id="permisoEscrituraFraseDescripcion" style="display:none;">{STATIC_VIEW_WORKSHOP_NO_ALLOW_DESCRIPTION}</div>
		<table border="0" cellspacing="0" cellpadding="0" style="width:100%;" id="tblList" class="streamsbox-results">
			<thead>
				<tr class="streamsbox-header nodrag">
					<td id="checkAll" class="unCheckAll" onclick="seleccionarTodo(this)"></td>
					<td></td>
					<td><h2><strong>{STATIC_VIEW_WORKSHOP_DATE_INSCRIPTION_NUMBER}</strong></h2></td>
					<td><h2><strong>{STATIC_VIEW_WORKSHOP_DATE_EMAIL}</strong></h2></td>
					<td><h2><strong>{STATIC_VIEW_WORKSHOP_DATE_NAME}</strong></h2></td>
					<td><h2><strong>{STATIC_VIEW_WORKSHOP_DATE_USER_TYPE}</strong></h2></td>
					<td><h2><strong>{STATIC_VIEW_WORKSHOP_DATE_PAID}</strong></h2></td>
					<td><h2><strong>{STATIC_VIEW_WORKSHOP_DATE_ASSISTED}</strong></h2></td>
      				<td><h2><strong>Certificate</strong></h2></td>
				</tr>				
			</thead>
			<tbody class="real-results" id="tblListItem">
			<!-- BEGIN: item_taller -->
				<tr id="fila_{WORKSHOP_DATE.ID}" {TR_STYLE} onclick="seleccionarFila(this)">
					<td id="icon_{WORKSHOP_DATE.ID}" class="unChecked"></td>
					<td class="containerToolTip" style="padding-right:2px;padding-left:2px;">{WORKSHOP_DATE.COMMENT}</td>
					<td style="vertical-align:top;">
						{WORKSHOP_DATE.REGISTRATION_NUMBER}
					</td>
					<td style="vertical-align:top;">
						{WORKSHOP_DATE.EMAIL}
					</td>
					<td style="vertical-align:top;">
						{WORKSHOP_DATE.NAME}
					</td>
					<td style="text-align: center;">{WORKSHOP_DATE.TYPE}</td>
					<td style="vertical-align:top;text-align: center;">
						<a href="javascript:modificarBooleanoElemento('{WORKSHOP_DATE.ID}',{ID_DESTINO_PAGADO},'paid')"><span id="paid_{WORKSHOP_DATE.ID}">{WORKSHOP_DATE.PAID}</span></a>
					</td>
					<td style="vertical-align:top;text-align: center;">
						<a href="javascript:modificarBooleanoElemento('{WORKSHOP_DATE.ID}',{ID_DESTINO},'attended')"><span id="attended_{WORKSHOP_DATE.ID}">{WORKSHOP_DATE.ATTENDED}</span></a>
					</td>
      				<td style="vertical-align:top;text-align: center;">
						{WORKSHOP_DATE.CERTIFICATE_PDF}
					</td>
					<td  {STATE_STYLE} class="containerToolTip"></td>
					<td style="display:none;">
						<input type="hidden" name="hdnBooleanoElemento_paid_{WORKSHOP_DATE.ID}" id="hdnBooleanoElemento_paid_{WORKSHOP_DATE.ID}" value="{WORKSHOP_DATE.PAID_NUMERIC}">
						<input type="hidden" name="hdnBooleanoElemento_attended_{WORKSHOP_DATE.ID}" id="hdnBooleanoElemento_attended_{WORKSHOP_DATE.ID}" value="{WORKSHOP_DATE.ATTENDED_NUMERIC}">
						<input type="hidden" name="hdnSeleccionado_{WORKSHOP_DATE.ID}" id="hdnSeleccionado_{WORKSHOP_DATE.ID}" value="0">
						<input type="hidden" name="hdnPermisoEscritura_{WORKSHOP_DATE.ID}" id="hdnPermisoEscritura_{WORKSHOP_DATE.ID}" value="{WORKSHOP_DATE_ALLOW}">
					</td>
				</tr>
			<!-- END: item_taller -->
			</tbody>
		</table>
	</div>
</div>
<div class="combar">
	<div class="cb1">
    	<div class="cb2">
    		<span>{PAGINADOR_INFORMACION}</span>
      		<div class="left">
				<span class="Nbuoyancy">{STATIC_FILTER_SHOW}:</span>
				{COMBO_NUMERO_REGISTROS}
			</div>
			<div class="left">
				<span class="Nbuoyancy">{STATIC_FILTER_ORDER_BY_FIELD}:</span>
				{COMBO_ORDEN}
			</div>
			
			{PAGINADOR_NAVEGACION_INFERIOR}
			{PAGINADOR}
	      	<span class="streams-up"></span>
    	</div>
  	</div>
</div>
<script>
window.addEventListener('DOMContentLoaded', function () {
  const select = document.getElementById('cmbFecha');

  if (select && select.selectedIndex === 0 && select.options.length > 1) {
    select.selectedIndex = 1;

    // Find the parent form and submit it
    const form = select.form;
    if (form) {
      form.submit();
    } else {
      console.warn('No parent form found for cmbFecha');
    }
  }
});
</script>
      
<!-- END: contenido_principal -->